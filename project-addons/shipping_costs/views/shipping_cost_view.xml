<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <menuitem name="Transportation" parent="sale.menu_sale_config" id="menu_transportation_sale"/>

    <record id="shipping_cost_form_view" model="ir.ui.view">
        <field name="name">shipping.cost.form.view</field>
        <field name="model">shipping.cost</field>
        <field name="arch" type="xml">
            <form>
                <group col="4">
                    <field name="cost_name"/>
                    <field name="is_active"/>
                    <field name="transporter_id"/>
                    <field name="fuel"/>
                    <field name="shipping_zone_id" domain="[('transporter_id.id', '=', transporter_id)]"/>
                    <field name="weight_volume_translation"/>
                </group>
                <group>
                    <field name="sequence"/>
                    <field name="volume"/>
                </group>
                <notebook>
                    <page string="Sale order conditions">
                        <field name="condition_ids">
                            <tree string="Conditions" editable="bottom">
                                <field name="filter_by"/>
                                <field name="operator"/>
                                <field name="arguments"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Fee">
                        <field name="fee_ids">
                            <tree string="Fees" editable="bottom">
                                <field name="type"/>
                                <field name="max_qty"/>
                                <field name="price"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Supplement">
                        <field name="supplement_ids">
                            <tree string="Supplements" editable="bottom">
                                <field name="carrier_id" domain="[('partner_id.id', '=', parent.transporter_id)]"/>
                                <field name="added_percentage"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
                <group colspan="6" col="6">
                    <field name="note" placeholder="Setup default terms and conditions in your sales settings ..." nolabel="1"/>
                </group>
            </form>
        </field>
    </record>

    <record id="shipping_cost_tree_view" model="ir.ui.view">
        <field name="name">shipping.cost.tree.view</field>
        <field name="model">shipping.cost</field>
        <field name="arch" type="xml">
            <tree>
                <field name="cost_name"/>
                <field name="is_active"/>
                <field name="shipping_zone_id"/>
                <field name="transporter_id"/>
                <field name="fuel"/>
                <field name="sequence"/>
                <field name="volume"/>
            </tree>
        </field>
    </record>

    <record id="shipping_cost_calculator_form" model="ir.ui.view">
        <field name="name">shipping.cost.calculator.form</field>
        <field name="model">shipping.cost.calculator</field>
        <field name="arch" type="xml">
            <form string="Shipping Cost Calculator">
                <group>
                    <field name="shipping_weight"/>
                    <field name="shipping_volume"/>
                    <field name="zip_code"/>
                    <field name="country_id"/>
                </group>
                <footer>
                    <button name="calculate_shipping_cost" string="Calculate" type="object" class="oe_highlight"
                            attrs="{'invisible': ['|', '|', ('shipping_weight','=', False), ('shipping_volume','=', False), ('zip_code', '=', False)]}"/>
                    <button string="Cancel" class="oe_link" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_open_shipping_cost_calculator_view">
        <field name="name">Shipping Costs Caculator</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">shipping.cost.calculator</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="shipping_cost_calculator_form"/>
        <field name="target">new</field>
    </record>

    <menuitem id="shipping_cost_calculator_item" name="Shipping Costs Calculator" action="action_open_shipping_cost_calculator_view"
              parent="shipping_costs.menu_transportation_sale"  sequence="12"/>

    <record model="ir.actions.act_window" id="action_open_shipping_cost_view">
        <field name="name">Shipping Costs</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">shipping.cost</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                              (0, 0, {'view_mode': 'tree', 'view_id': ref('shipping_cost_tree_view')}),
                              (0, 0, {'view_mode': 'form', 'view_id': ref('shipping_cost_form_view')})]"
        />
    </record>

    <menuitem id="shipping_cost_item" name="Shipping Costs" action="action_open_shipping_cost_view"
              parent="shipping_costs.menu_transportation_sale" sequence="12"/>


</odoo>
